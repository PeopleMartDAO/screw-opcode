$(BUILD_DIR)\\minilua.exe: ext\screwopcode\jit\dynasm\minilua.c
	@if exist $(BUILD_DIR)\\minilua.exe del $(BUILD_DIR)\\minilua.exe
	$(PHP_CL) /Fo$(BUILD_DIR)\ /Fd$(BUILD_DIR)\ /Fp$(BUILD_DIR)\ /FR$(BUILD_DIR) /Fe$(BUILD_DIR)\minilua.exe ext\screwopcode\jit\dynasm\minilua.c

ext\screwopcode\jit\zend_jit_x86.c: ext\screwopcode\jit\zend_jit_x86.dasc $(BUILD_DIR)\\minilua.exe
	@if exist ext\screwopcode\jit\zend_jit_x86.c del ext\screwopcode\jit\zend_jit_x86.c
	$(BUILD_DIR)\\minilua.exe ext/screwopcode/jit/dynasm/dynasm.lua $(DASM_FLAGS) -o $@ ext/screwopcode/jit/zend_jit_x86.dasc

$(BUILD_DIR)\ext\screwopcode\jit\zend_jit.obj: \
	ext/screwopcode/jit/zend_jit_x86.c \
	ext/screwopcode/jit/zend_jit_helpers.c \
	ext/screwopcode/jit/zend_jit_disasm_x86.c \
	ext/screwopcode/jit/zend_jit_gdb.c \
	ext/screwopcode/jit/zend_jit_perf_dump.c \
	ext/screwopcode/jit/zend_jit_oprofile.c \
	ext/screwopcode/jit/zend_jit_trace.c \
	ext/screwopcode/jit/zend_jit_vtune.c
